<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>내 학습 현황</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>

<div th:replace="fragments/header :: headerFragment"></div>

<div class="container">
    <h1>내 학습 현황</h1>

    <div th:if="${enrollments.isEmpty()}">
        <p>등록된 강좌가 없습니다.</p>
        <a href="/courses/active" class="btn btn-primary">강좌 둘러보기</a>
    </div>

    <div th:each="enrollment : ${enrollments}">
        <a th:href="@{/courses/{courseId}(courseId=${enrollment.courseId ?: '#'})}" class="enrollment-card-link">
            <div class="enrollment-card">
                <div class="course-title" th:text="${enrollment.courseTitle ?: '제목 없음'}">강좌 제목</div>

                <div class="progress-text">
                    <span th:text="${enrollment.completedLectureCount ?: 0}">0</span> /
                    <span th:text="${enrollment.totalLectureCount ?: 0}">0</span> 강의 완료
                    (<span th:text="${enrollment.progressPercentage ?: 0}">0</span>%)
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" th:style="'width: ' + ${enrollment.progressPercentage ?: 0} + '%;'"></div>
                </div>
            </div>
        </a>
    </div>

    <hr style="margin: 30px 0;">

    <h2>내 게시글</h2>
    <div th:if="${myPosts.isEmpty()}">
        <p>작성한 게시글이 없습니다.</p>
        <a href="/community/post/new" class="btn btn-primary">새 게시글 작성하기</a>
    </div>

    <div th:each="post : ${myPosts}" class="enrollment-card" style="margin-bottom: 15px;">
        <a th:href="@{/community/post/{postId}(postId=${post.id})}" class="enrollment-card-link">
            <div class="course-title" th:text="${post.title}">게시글 제목</div>
            <div class="progress-text" th:text="${post.content}">게시글 내용</div>
            <div class="progress-text">작성일: <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></span></div>
        </a>
    </div>

    <hr style="margin: 30px 0;">

    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1>내가 개설한 강좌</h1>
        <a href="/my/courses/new" class="btn btn-primary">새 강좌 개설하기</a>
    </div>

    <div th:if="${createdCourses.isEmpty()}">
        <p>개설한 강좌가 없습니다.</p>
    </div>

    <div th:each="course : ${createdCourses}">
        <a th:href="@{/my/courses/{courseId}(courseId=${course.id ?: '#'})}" class="enrollment-card-link">
            <div class="enrollment-card">
                <div class="course-title" th:text="${course.title ?: '제목 없음'}">강좌 제목</div>
                <div class="progress-text">
                    <span th:text="${course.description ?: '설명 없음'}">강좌 설명</span>
                </div>
                <div class="progress-text">
                    가격: <span th:text="${course.price ?: 0}">0</span>원
                </div>
                <div class="progress-text">
                    상태: <span th:text="${course.courseStatus ?: '상태 알 수 없음'}">상태</span>
                </div>
            </div>
        </a>
    </div>
</div>

</body>
</html>